@model APATools.Models.Sp_UserLoginResult 
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Login</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js" integrity="sha256-xLD7nhI62fcsEZK2/v8LsBcb4lG7dgULkuXoXB/j91c=" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
    <style type="text/css">
        .divider:after,
        .divider:before {
            content: "";
            flex: 1;
            height: 1px;
            background: #eee;
        }
    </style>
</head>
<body>
    <div>
        <section class="vh-100">
            <div class="container py-5 h-100">
                <div class="row d-flex align-items-center justify-content-center h-100">
                    <div class="col-md-8 col-lg-7 col-xl-4">
                        <img src="~/images/logo.png" class="img-fluid img-circle" alt="Phone image" width="350" style="rounded mx-auto d-block" />
                        <img src="~/images/logo_bg_white.jpg" class="img-fluid img-circle" alt="Phone image" width="350" style="rounded mx-auto d-block" />
                    </div>
                    <div class="col-md-7 col-lg-5 col-xl-4 offset-xl-1">
                        <div class="form-outline mb-4 text-primary">
                            <h1>Welcome to APA Tools!</h1>
                        </div>
                        @using (Html.BeginForm())
                        {
                            @Html.AntiForgeryToken()
                            <!-- Email input -->
                            <div class="form-outline mb-4">
                                @Html.TextBoxFor(model => model.UserName, new { @class = "form-control form-control-lg", required = "required" })
                                @Html.ValidationMessageFor(model => model.UserName)
                                <label class="form-label">Enter Username</label>
                            </div>

                            <!-- Password input -->
                            <div class="form-outline mb-4">
                                @Html.PasswordFor(model => model.UserPassword, new { @class = "form-control form-control-lg", required = "required", @ID = "UserPassword" })
                                @Html.ValidationMessageFor(model => model.UserPassword)
                                <label class="form-label">Enter Password</label>
                                <input type="hidden" name="hide" id="hide" />
                                <div style="color:red" id="err"></div>
                            </div>

                            <!-- Submit button -->

                            <button type="submit" class="btn btn-primary btn-lg btn-block" onclick="return encrypt()">Sign in</button>

                            @Html.ValidationSummary(false, "", new { @class = "alert-danger" })

                        }
                        @if (TempData["Failed"] != null)
                        {
                            <div class="x_content">
                                <div class="alert alert-danger">
                                    @TempData["Failed"]
                                </div>
                            </div>
                        }
                        @if (TempData["Success"] != null)
                        {
                            <div class="x_content">
                                <div class="alert alert-success">
                                    @TempData["Success"]
                                </div>
                            </div>
                        }
                        @* <div class="x_content">
                            <img src="~/images/logo_bg_white.jpg" class="img-fluid img-circle" alt="Phone image" />
                        </div> *@
                    </div>
                </div>
            </div>

        </section>
    </div>
</body>
</html>

@section Scripts
{

    <script type="text/javascript">

        function encrypt() {
            var pass = document.getElementById('UserPassword').value;
            var hide = document.getElementById('hide').value;
            if (pass == "") {
                document.getElementById('err').innerHTML = 'Error:Password is missing';
                return false;
            }
            else {
                document.getElementById("hide").value = document.getElementById("UserPassword").value;
                var hash = CryptoJS.MD5(pass);
                document.getElementById('UserPassword').value = hash;
                return true;
            }
        }
    </script>
}